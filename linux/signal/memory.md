# 共享内存

- 共享内存是运行在同一台机器上的进程间通信最快的方式，因为数据不需要在不同的进程间复制。
- 通常由一个进程创建一块共享内存区，其余进程对这块内存区进行 读写。得到共享内存有两种方式：映射/dev/mem设备和内存映像文件。
- 前一种方式不给系统带来额外的开销，但在现实中并不常用，因为它控制存取的将是实际的物理内存，在Linux系统下，这只有通过限制Linux系统存取的内存才可以做到，这当然不太实际。常用的方式是通过shmXXX函数族来实现利用共享内存进行存储的。 

## 原理
- 要使用一块共享内存，进程必须首先分配它。
- 需要访问这个共享内存块的每一个进程都必须将这个共享内存绑定到自己的地址空间中。
- 当完成通信之后，所有进程都将脱离共享内存，并且由一个进程释放该共享内存块

## 优点
- 共享内存号称是最快的进程间通信方式
	- 系统内存中开辟一块内存区，分别映射到各个进程的虚拟地址空间中，任何一个进程操作了内存区都会反映到其他进程中，各个进程之间的通信并没有像copy数据一样从内核到用户，再从用户到内核的拷贝这种方式可以像访问自己的私有空间一样访问共享内存区
- 进程可以直接读写内存，而不需要任何数据的拷贝

## 缺点

- 编写难度大
	- 多个进程同时写一块内存容易造成数据的混乱
- 共享内存没有提供同步的机制
	- 这使得我们在使用共享内存进行进程间通信时，往往要借助其他的手段来进行进程间的同步工作。