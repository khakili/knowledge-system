学习java基本数据类型的核心知识点如下：
> - 数据类型的分类
> - 基本类型的类型转换
> - 保持数据精度
> - 拆箱与装箱

## 数据类型的分类

java支持的数据类型分为两类：基本数据类型 和 引用类型。

基本数据类型分为：布尔类型 和 数值类型。数值类型又可以细分为：整数类型 和 浮点类型。

整数类型包括：byte、short、int、long、char。浮点类型包括：float、double。

> char代表字符型，实际上字符型也是一种整数类型，相当于无符号整数类型。

![](../images/doc/basetype1.jpg)

**基本数据类型和引用类型的区别**

- 从概念方面区分：
   - 基本类型：变量名指向具体的数值
   - 引用类型：变量名指向存数据对象的内存地址
- 从内存方面区分：
   - 基本类型：变量在声明之后，Java就会立刻分配给他内存空间
   - 引用类型：它以特殊的方式（类似C指针）指向对象实体（具体的值），这类变量声明时不会分配内存，只是存储了一个内存地址
- 从使用方面区分：
   - 基本类型：使用时需要赋具体值，判断时使用 == 号
   - 引用类型：使用时可以赋null，判断时使用 equals 方法

## 基本类型的类型转换

java语言的7种数值类型之间可以进行类型转换，分为两种：自动类型转换 和 强制类型转换

#### 自动类型转换

发生条件：
- 1.赋值运算：当该数据类型的数值表示范围小于另一种数据类型的数值表示范围时，赋值运算会进行自动类型转换。
- 2.表达式自动提升：当一个算术表达式中包含多个基本类型的值时，整个算术表达式的数据类型发生自动提升。整个算术表达式的数据类型自动提升到与表达式中最高等级操作数同样的类型。


![](../images/doc/basetype3.jpg)

> 这里我们所说的“大”与“小”，并不是指占用字节的多少，而是指表示值的范围的大小。

举例说明：

```
long x = 30;
float y = 14.3f;
System.out.println("x/y = " + x/y);
```
输出：
```
x/y = 1.9607843
```

long类型的长度为8个字节，占64位，表示范围为 -2^63  -  (2^63 - 1)

float类型的长度为4个字节，占32位，表示范围为超过  -2^128 - 2^128 

java的浮点数采用二进制数据的科学计数法来表示，对于float类型，第1位是符号位，接下来8位表示指数，再接下来的23位表示尾数.
由于float的指数部分对应的指数范围为-128-128，所以取值范围为：-2^128到2^128；精度(有效数字)看尾数位：
float的尾数位是23位，对应7-8位十进制数，所以有效数字有的编译器是7位，也有的是8位。

#### 强制类型转换

发生条件：

- 当试图强制把表数范围大的类型转换为表数范围小的类型时

示例：
```
float f = 25.5f;
int x = (int)f;
System.out.println("x = " + x);
```

## 保持数据精度

因为Java浮点数使用二进制数据的科学计数法来表示浮点数，因此不可能精确表示一个浮点数。需要精确保存或计算时，使用BigDecimal类。

BigDecimal类三种常用的构造方法：

- 1.public BigDecimal(double val)    将double表示形式转换为BigDecimal  **不建议使用**

- 2.public BigDecimal(int val)       将int表示形式转换成BigDecimal

- 3.public BigDecimal(String val)    将String表示形式转换成BigDecimal
    
    为什么不建议采用第一种构造方法呢？来看例子。

示例：
```
public static void main(String[] args)
    {
        BigDecimal bigDecimal = new BigDecimal(2);
        BigDecimal bDouble = new BigDecimal(2.3);
        BigDecimal bString = new BigDecimal("2.3");
        System.out.println("bigDecimal=" + bigDecimal);
        System.out.println("bDouble=" + bDouble);
        System.out.println("bString=" + bString);
    }
```
运行结果：
```
bigDecimal = 2
bDouble = 2.2999999999823245452312
bString = 2.3
```

> 通常建议优先使用String构造方法。

计算机中所有的存储都是 01 两种状态，因此整个计算机的数据就有 2^n 种状态，这是一个有限状态机，描述的世界是离散的，因此不能描述连续的数字，根本上就不能准确描述浮点数。

引申一个问题，为什么编程语言只用三种结构 —— 顺序、分支（选择）、循环 就可以实现一切流程？

![](../images/doc/basetype4.jpg)

有限状态机
- 一个点只有一个出度 —— 顺序结构
- 一个点有多个出度 —— 分支结构
- 形成了环 —— 循环结构

## 拆箱与装箱

Java 中为每一种基本数据类型提供了相应的包装类，提供一种机制，使得基本数据类型可以与引用类型互相转换。

> 基本数据类型与包装类的转换被称为装箱和拆箱

装箱（boxing）是将值类型转换为引用类型。例如：int 转 Integer
装箱过程是通过调用包装类的 valueOf 方法实现的。

拆箱（unboxing）是将引用类型转换为值类型。例如：Integer 转 int
拆箱过程是通过调用包装类的 xxxValue 方法实现的。（xxx 代表对应的基本数据类型）。

> Java 对于自动装箱和拆箱的设计，依赖于享元设计模式。享元模式尝试重用现有的同类对象，如果未找到匹配的对象，则创建新对象。

> Mapper中方法返回类型应使用包装类，而不是基本类型。防止拆箱时发生空指针异常。
